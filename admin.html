<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>åº—å®¶å¾Œå°ç®¡ç†</title>
    <style>
        body { font-family: sans-serif; background-color: #2c3e50; color: white; padding: 20px; }
        .container { max-width: 800px; margin: auto; }
        table { width: 100%; border-collapse: collapse; background: #34495e; margin-top: 20px; }
        th, td { border: 1px solid #444; padding: 15px; text-align: center; }
        th { background-color: #1abc9c; }
        button { background: #e67e22; color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“‹ è¨‚å–®ç®¡ç† (é›²ç«¯ç‰ˆ)</h1>
        <button onclick="loadOrders()">ğŸ”„ åˆ·æ–°åˆ—è¡¨</button>
        <table>
            <thead>
                <tr>
                    <th>å–®è™Ÿ</th>
                    <th>å“é …</th>
                    <th>é‡‘é¡</th>
                    <th>ç‹€æ…‹</th>
                    <th>å‹•ä½œ</th>
                </tr>
            </thead>
            <tbody id="admin-list">
                <tr><td colspan="5">é€£ç·šé›²ç«¯ä¸­...</td></tr>
            </tbody>
        </table>
    </div>

    <script>
        const API_URL = 'https://tei123.onrender.com';

        function loadOrders() {
            fetch(`${API_URL}/api/admin/orders`)
                .then(res => res.json())
                .then(data => {
                    let html = '';
                    data.forEach(o => {
                        html += `
                            <tr>
                                <td>${o.id}</td>
                                <td>${o.items}</td>
                                <td>$${o.total_amount}</td>
                                <td>${o.status}</td>
                                <td>
                                    <button onclick="updateStatus(${o.id})">é€šçŸ¥å–é¤</button>
                                </td>
                            </tr>
                        `;
                    });
                    document.getElementById('admin-list').innerHTML = html;
                });
        }

        function updateStatus(id) {
            fetch(`${API_URL}/api/admin/update_status/${id}`, { method: 'POST' })
                .then(() => {
                    alert("å·²ç™¼é€å–é¤é€šçŸ¥ï¼");
                    loadOrders();
                });
        }

        loadOrders();
    </script>
</body>
</html>